import{g as s,s as i,a as r,l as u}from"./utils-Diqr6REO.js";import{P as c}from"./ProductData-WQnOFAAW.js";class d{constructor(e,o){this.productId=e,this.dataSource=o,this.product={}}async getProduct(){const o=await(await fetch(`../json/${this.dataSource.category}.json`)).json();this.product=o.find(a=>a.Id===Number(this.productId))}async init(){this.product=await this.dataSource.findProductById(this.productId),console.log("ID:",this.productId),console.log("Datasource:",this.dataSource),console.log("Product category:",this.dataSource.category),console.log("Data:",await fetch(`../json/${this.dataSource.category}.json`)),this.renderProductDetails(),document.getElementById("addToCart").addEventListener("click",this.addProductToCart.bind(this))}addProductToCart(){const e=s("so-cart")||[];e.push(this.product),i("so-cart",e)}async findProductById(e){return(await this.getData()).find(a=>a.Id.toString().toLowerCase()===e.toString().toLowerCase())}renderProductDetails(){l(this.product)}}function l(t){document.querySelector("h2").textContent=t.Brand.Name,document.querySelector("h3").textContent=t.NameWithoutBrand;const e=document.getElementById("productImage");e.src=t.Images?t.Images.PrimaryMedium:t.Image,e.alt=t.NameWithoutBrand,document.getElementById("productPrice").textContent=t.FinalPrice,document.getElementById("productColor").textContent=t.Colors[0].ColorName,document.getElementById("productDesc").innerHTML=t.DescriptionHtmlSimple,document.getElementById("addToCart").dataset.id=t.Id}const m=new c("sleeping-bags"),g=r("product"),h=new d(g,m);h.init();u();document.querySelector(".product-list");document.querySelectorAll(".category-nav-item a").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const o=getParamKey(),a=new c(o),n=r("product");new d(n,a).init()})});
