import"./style-HlQJNEhF.js";import{g as h,s as g,l as m,a as u}from"./utils-B3cLSmJT.js";function l(o){if(o.ok)return o.json();throw new Error("Bad Response")}class p{constructor(t){this.category=t,this.path=`../json/${this.category}.json`}async getData(){try{const t=await fetch(this.path);if(t){const a=await l(t);return this.category==="tents"?a:a.Result}else return"data not available"}catch{return"data not available"}}async findProductById(t){return(await this.getData()).find(e=>e.Id.toString().toLowerCase()===t.toString().toLowerCase())}}class y{constructor(t,a){this.productId=t,this.dataSource=a,this.path=`../json/${this.dataSource.category}.json`,this.productsByCategory={},this.product={}}async findProductDataByProductId(t){return(await fetch(this.path).then(l).then(e=>e.Result?e.Result:e)).find(e=>e.Id===t)}async init(){if(this.product=await this.findProductDataByProductId(this.productId),!this.product){console.error("Product not found.");return}console.log("Products:",this.product),console.log("ID:",this.productId),console.log("Datasource:",this.dataSource),console.log("Product category:",this.dataSource.category),console.log("Brand:",this.product.Brand),this.renderProductDetails();const t=document.getElementById("addToCart");t&&t.addEventListener("click",this.addProductToCart.bind(this))}addProductToCart(){const t=h("so-cart")||[];t.push(this.product),g("so-cart",t),console.log("Product added to cart:",this.product)}renderProductDetails(){I(this.product)}}function I(o){var n,s,d,i;document.querySelector("h2").textContent=((n=o.Brand)==null?void 0:n.Name)||"Unknown Brand",document.querySelector("h3").textContent=o.NameWithoutBrand||"Unnamed Product";const t=document.getElementById("productImage");t&&(t.src=((s=o.Images)==null?void 0:s.PrimaryMedium)||o.Image||"/images/placeholder.jpg",t.alt=o.NameWithoutBrand||"Product Image");const a=document.getElementById("productPrice");a&&(a.textContent=o.FinalPrice||"0");const e=document.getElementById("productColor");e&&(e.textContent=((i=(d=o.Colors)==null?void 0:d[0])==null?void 0:i.ColorName)||"N/A");const r=document.getElementById("productDesc");r&&(r.innerHTML=o.DescriptionHtmlSimple||"");const c=document.getElementById("addToCart");c&&(c.dataset.id=o.Id)}m();const P=u("category"),f=new p(P),B=u("product"),C=new y(B,f);C.init();
